<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.25.1" />
  <meta name="author" content="Jerid Francom">
  <meta name="description" content="Associate Professor of Spanish and Linguistics">

  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css">
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.0/css/academicons.min.css" integrity="sha512-GGGNUPDhnG8LEAEDsjqYIQns+Gu8RBs4j5XGlxl7UfRaZBhCCm5jenJkeJL8uPuOXGqgl8/H1gjlWQDRjd3cUQ==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather%7CRoboto+Mono">
  <link rel="stylesheet" href="/css/hugo-academic.css">
  
  <link rel="stylesheet" href="/css/my-styles.css">
  
  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-57189160-2', 'auto');
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="//www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  

  <link rel="alternate" href="https://francojc.github.io/index.xml" type="application/rss+xml" title="francojc ⟲">
  <link rel="feed" href="https://francojc.github.io/index.xml" type="application/rss+xml" title="francojc ⟲">

  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/apple-touch-icon.png">

  <link rel="canonical" href="https://francojc.github.io/2014/12/19/publishing-rmarkdown-to-wordpress-or-jekyll/">

  

  <title>Publishing Rmarkdown to Wordpress or Jekyll | francojc ⟲</title>

</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71">

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">francojc ⟲</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        
        
        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
          </a>
        </li>

        
        
        
        

        <li class="nav-item">
          <a href="/#posts">
            
            <span>Posts</span>
          </a>
        </li>

        
        
        
        

        <li class="nav-item">
          <a href="/#projects">
            
            <span>Projects</span>
          </a>
        </li>

        
        
        
        

        <li class="nav-item">
          <a href="https://wfu.academia.edu/francom/">
            
            <span>Publications</span>
          </a>
        </li>

        
        
        
        

        <li class="nav-item">
          <a href="/#teaching">
            
            <span>Teaching</span>
          </a>
        </li>

        
        
        
        

        <li class="nav-item">
          <a href="/vitae.pdf">
            
            <span>Vitae</span>
          </a>
        </li>

        
        
        
        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
          </a>
        </li>

        
        

        
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  


  <div class="article-container">
    
    <span class="article-duration">6 min read</span>
    
    <h1 itemprop="name">Publishing Rmarkdown to Wordpress or Jekyll</h1>
    

<div class="article-metadata">

  <span class="article-date">
    <time datetime="2014-12-19 00:00:00 &#43;0000 UTC" itemprop="datePublished">
      Fri, Dec 19, 2014
    </time>
  </span>

  
  
  
  <span class="article-categories">
    <i class="fa fa-folder"></i>
    
    <a href="/categories/r">R</a
    >
    
  </span>
  
  

  
  
  
  <span class="article-tags">
    <i class="fa fa-tags"></i>
    
    <a href="/tags/jekyll">Jekyll</a
    >
    
  </span>
  
  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=Publishing%20Rmarkdown%20to%20Wordpress%20or%20Jekyll&amp;url=https%3a%2f%2ffrancojc.github.io%2f2014%2f12%2f19%2fpublishing-rmarkdown-to-wordpress-or-jekyll%2f"
         target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=Publishing%20Rmarkdown%20to%20Wordpress%20or%20Jekyll&amp;body=https%3a%2f%2ffrancojc.github.io%2f2014%2f12%2f19%2fpublishing-rmarkdown-to-wordpress-or-jekyll%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>

    <div class="article-style" itemprop="articleBody">
      <div id="publish-to-wordpress" class="section level2">
<h2>Publish to Wordpress</h2>
<p>When I first starting looking into matters, I was using a Wordpress site hosted on <a href="http://wordpress.com">Wordpress.com</a>. I did some research on how to <code>knit</code> and send an <code>.Rmd</code> file to Wordpress with all images going along for the ride. I found <a href="http://yihui.name/knitr/demo/wordpress/">Yuhui Xie’s documentation on the official Knitr page</a> which was very helpful and some <a href="https://github.com/yihui/knitr-examples/blob/master/010-upload.Rmd">documentation on uploading images</a> to <a href="http://imgur.com">imgur.com</a>.</p>
<p>This approach requires the <code>knitr</code>, <code>markdown</code> and <code>RWordpress</code> packages. First we set up some options in <code>knitr</code> to adjust the figure sizes and upload them to imgur.com.</p>
<pre class="r"><code>library(knitr)
# Set figure dimensions
opts_chunk$set(fig.width=5, fig.height=5)
# Set figures to upload to imgur.com
opts_knit$set(upload.fun = imgur_upload, base.url = NULL) </code></pre>
<p>Next let’s get to <code>knit</code>in’. The <code>knit()</code> function will create a</p>
<pre class="r"><code>rmd.file &lt;- &quot;yourfile.Rmd&quot;
# Knit the .Rmd file
knit(rmd.file)
# Set up input/ output files
markdown.file &lt;- gsub(pattern = &quot;Rmd$&quot;, replacement = &quot;md&quot;, x = rmd.file)
html.file &lt;- gsub(pattern = &quot;md$&quot;, replacement = &quot;_pub.html&quot;, x = markdown.file)</code></pre>
<p>Now we’ll load the <code>markdown</code> package and convert the <code>.md</code> file we knitted earlier to an <code>.html</code>. Using the <code>fragment.only</code> parameter we can drop the YAML info that is part of the Rmarkdown file.</p>
<pre class="r"><code>library(markdown)
# Removes &#39;yaml&#39; information
markdownToHTML(file = markdown.file, output = html.file, fragment.only = TRUE) </code></pre>
<p>All that’s left is to set up your Wordpress site’s credentials and then send the post. Note that the parameter <code>publish = FALSE</code> in the <code>newPost()</code> function means that the post will be added as a draft. This is helpful if you want to preview the post and add tags and categories before publishing.</p>
<pre class="r"><code>library(RWordpress)
# Set your WP username, password, and your site URL
options(WordpressLogin = c(your.username = &#39;your.password&#39;), 
        WordpressURL = &#39;https://your-wordpress-site.com/xmlrpc.php&#39;)
# Create a line-by-line text vector
text = paste(readLines(html.file), collapse = &quot;\n&quot;)
# Send to Worpdress
newPost(list(description = text, title = &quot;Your post&#39;s title!&quot;), publish = FALSE)</code></pre>
<p>I put together a command-line script that you can find <a href="https://github.com/francojc/exploRations/tree/master/Publishing">here</a>.</p>
</div>
<div id="publish-to-jekyll-and-host-on-github" class="section level2">
<h2>Publish to Jekyll and host on GitHub</h2>
<div id="setting-up-your-site" class="section level3">
<h3>Setting up your site</h3>
<p>After poking around on the web I was intrigued by the <a href="http://jekyllrb.com">Jekyll</a> publishing framework and hosting on <a href="https://help.github.com/articles/using-jekyll-with-pages/">GitHub</a>. After some reading and browsing around other Jekyll sites on GitHub, I decided to fork the <a href="https://mademistakes.com/articles/minimal-mistakes-jekyll-theme/"><code>minimal-mistakes</code></a> Jekyll theme by Michael Rose.</p>
<p>You could find any number of themes on the web that have the main configurations already set up. Michael Rose has a <a href="https://mademistakes.com/work/jekyll-themes/">few</a>, but you can also find good basic themes using <a href="http://jekyllbootstrap.com">Jekyll-bootstrap</a>. If you go this way you’ll have a similar set of steps to get up and running.</p>
<p><strong>Requirements:</strong> a GitHub account, <code>Ruby</code> and <code>RubyGems</code> installed, and a *nix system with git installed.</p>
<p>On Github:</p>
<ul>
<li>Find a Jekyll theme to work with on GitHub and fork it</li>
<li>Edit the settings of this forked repository changing the repository name to <code>gitusername.github.io</code></li>
</ul>
<p>On your local system:</p>
<ul>
<li>Fire up Terminal</li>
<li>Make sure you have <code>git</code> installed/ updated.</li>
<li>Clone your new repository</li>
</ul>
<pre class="bash"><code>git clone https://github.com/francojc/francojc.github.io.git</code></pre>
<p>Now you will have the remote repository mirrored on your local system. If you’d like to be able to develop locally you’ll need to install Jekyll (and dependencies).</p>
<pre class="bash"><code>gem install bundler</code></pre>
<p>You can now preview the site locally by running:</p>
<pre class="bash"><code>jekyll build
jekyll serve</code></pre>
<p>Then you should be able to view your site at <a href="http://localhost:4000/" class="uri">http://localhost:4000/</a>.</p>
<p>After you’re feeling pretty great about getting a site up in no time, it’s time to personalize your site. To understand how this works I’ve copied/adapted the scaffolding schema from the <code>minimal-mistakes</code> theme as an example.</p>
<pre><code>minimal-mistakes/
├── _config.yml
├── _data/
|    ├── navigation.yml
├── _includes/
|    ├── _author-bio.html        # bio stuff layout. pulls optional owner data from 
|    ├── _browser-upgrade.html   # prompt to install a modern browser for &lt; IE9
|    ├── _disqus_comments.html   # Disqus comments script
|    ├── _footer.html            # site footer
|    ├── _head.html              # site head
|    ├── _navigation.html        # site top navigation
|    ├── _open-graph.html        # Twitter Cards and Open Graph meta data
|    └── _scripts.html           # site scripts
├── _layouts/
|    ├── home.html               # homepage layout
|    ├── page.html               # page layout
|    ├── post-index.html         # post index layout
|    └── post.html               # single post layout
├── _posts/                      # MarkDown formatted posts
├── _sass/                       # Sass stylesheets
├── _templates/                  # used by Octopress to define YAML variables for new posts/pages
├── about/                       # sample about page
├── assets/
|    ├── css/                    # compiled stylesheets
|    ├── fonts/                  # webfonts
|    ├── js/
|    |   ├── _main.js            # main JavaScript file, plugin settings, etc
|    |   ├── plugins/            # scripts and jQuery plugins to combine with _main.js
|    |   ├── scripts.min.js      # concatenated and minified _main.js + plugin scripts
|    |   └── vendor/             # vendor scripts to leave alone and load as is
|    └── less/
├── images/                      # images for posts and pages
├── 404.md                       # 404 page
├── feed.xml                     # Atom feed template
├── index.md                     # sample homepage. lists 5 latest posts 
├── posts/                       # sample post index page. lists all posts in reverse chronology
└── theme-setup/                 # theme setup page. safe to remove</code></pre>
<p>Key areas to focus on in this scaffolding are the <code>_config.yml</code> and <code>_data/navigation.yml</code> files and the <code>_posts</code> and <code>images</code> directories. The <code>_config.yml</code> file is where you make site-level configuration changes. The <code>_data/navigation.yml</code> is where you set up your navigation. And the <code>_posts</code> and <code>images</code> directories is where your markdown files and images will be added.</p>
<p>Let’s do a quick test. Create a markdown file with the <code>.md</code> extension (manually or via <code>knitr</code>). Then rename that file with the format <code>2014-12-19-my-filename.md</code>. Before we copy the file into the <code>_posts</code> directory, we need to prepend some meta information (aka “Front matter”) to the file:</p>
<pre class="markdown"><code>---
layout: post
title: &quot;My first post&quot;
---

# My first post

This sure is fun...</code></pre>
<p>Go ahead and move the <code>2014-12-19-my-filename.md</code> file into <code>_posts/</code>. Then return to the terminal and run:</p>
<pre class="bash"><code>jekyll serve</code></pre>
<p>Preview, ooh’s and aah’s.</p>
<p>To create pages, edit the navigation, and other changes I will refer you to the <a href="https://mmistakes.github.io/minimal-mistakes/theme-setup/#site-setup"><code>minimal-mistakes</code> documentation</a>.</p>
</div>
<div id="publishing" class="section level3">
<h3>Publishing</h3>
<p>Now we want to be able to convert a <code>.Rmd</code> document to a <code>.md</code> document and then prepare the figure paths to look for our figures in the <code>images</code> directory in our <code>Jekyll</code> site. I found a nice base function that uses <code>knitr</code> and knitr options to do just that at <a href="https://jfisher-usgs.github.io/r/2012/07/03/knitr-jekyll/">jfisher-usgs</a>.</p>
<pre class="r"><code>library(knitr)
my.jekyll.site &lt;- &quot;gitusername.github.io&quot;
KnitPost &lt;- function(input, base.url = my.jekyll.site) {
  opts_knit$set(base.url = base.url)
  fig.path &lt;- paste0(&quot;images/&quot;, sub(&quot;.Rmd$&quot;, &quot;&quot;, basename(input)), &quot;/&quot;)
  opts_chunk$set(fig.path = fig.path)
  opts_chunk$set(fig.cap = &quot;center&quot;)
  render_jekyll()
  knit(input, envir = parent.frame())
}</code></pre>
<p>And then we can run it</p>
<pre class="r"><code>KnitPost(&quot;2014-12-19-my-filename.Rmd&quot;)</code></pre>
<p>You’re <code>.Rmd</code> will have been converted to a <code>.md</code> file with the appropriate code syntax, and if you have figures in your <code>.Rmd</code> then they will be found in the <code>images/my-filename/</code> directory. Now drop the <code>my-filename</code> directory (containing the figure images) into the <code>images/</code> directory and move the <code>my-filename.md</code> file to the <code>_posts</code> directory in the Jekyll site.</p>
<p>You can preview your work with <code>jekyll serve</code> but the images will not render until they are uploaded to our <code>gitusername.github.io</code> site. So let’s do that.</p>
<p>Open Terminal and run:</p>
<pre class="bash"><code>git add --all
git commit -m &quot;Initial configuration and post&quot;
git push</code></pre>
<p>Now you can visit your GitHub site and marvel at your work.</p>
<p>Again, I put together a command-line script to make it easier to run this script. You can find it <a href="https://github.com/francojc/exploRations/tree/master/Publishing">here</a>.</p>
</div>
</div>

    </div>
  </div>

</article>

<div class="container">
  <nav>
  <ul class="pager">
    
    <li class="previous"><a href="https://francojc.github.io/2014/12/17/access-twitter-posts-by-country/"><span
      aria-hidden="true">&larr;</span> Access Twitter posts by country</a></li>
    

    
    <li class="next"><a href="https://francojc.github.io/2015/02/02/selecting-and-copying-a-random-subset-of-files-in-the-fish-shell/">Selecting and copying a random subset of files in the Fish shell <span
      aria-hidden="true">&rarr;</span></a></li>
    
  </ul>
</nav>

</div>

<div class="article-container">
  
<section id="comments">
  <div id="disqus_thread">
    <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "francojc" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</section>


</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2017 Jerid Francom &middot; 

      Powered by the <a href="https://github.com/gcushen/hugo-academic" target="_blank">Academic
      theme</a> for <a href="http://gohugo.io" target="_blank">Hugo</a> and hosted on <a href="https://github.com" target="_blank">Github</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js" integrity="sha512-jGsMH83oKe9asCpkOVkBnUrDDTp8wl+adkB2D+//JtlxO4SrLoJdhbOysIFQJloQFD+C4Fl1rMsQZF76JjV0eQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.2/imagesloaded.pkgd.min.js" integrity="sha512-iHzEu7GbSc705hE2skyH6/AlTpOfBmkx7nUqTLGzPYR+C1tRaItbRlJ7hT/D3YQ9SV0fqLKzp4XY9wKulTBGTw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.1/TweenMax.min.js" integrity="sha512-Z5heTz36xTemt1TbtbfXtTq5lMfYnOkXM2/eWcTTiLU01+Sw4ku1i7vScDc8fWhrP2abz9GQzgKH5NGBLoYlAw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.1/plugins/ScrollToPlugin.min.js" integrity="sha512-CDeU7pRtkPX6XJtF/gcFWlEwyaX7mcAp5sO3VIu/ylsdR74wEw4wmBpD5yYTrmMAiAboi9thyBUr1vXRPA7t0Q==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    
    <script src="/js/hugo-academic.js"></script>
    

    
    
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>

      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/r.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/bash.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/css.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/markdown.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/shell.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/sql.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/tex.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/yaml.min.js"></script>
      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    

  </body>
</html>

