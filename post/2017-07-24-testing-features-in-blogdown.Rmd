---
title: Testing features in `blogdown`
author: Jerid Francom
date: '2017-07-24'
slug: testing-features-in-blogdown
summary: 'A post to test some of the basic features and functions of `blogdown`.'
comments: true
categories:
  - R
tags:
  - plot
  - table
bibliography: data/Projects-Textbook.bib
---

```{r setup, echo=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)
library(DT) # for dynamic tables
```

This is a post to test the functionality of `blogdown`. We are going to look at how various types of outputs are rendered and do some tweaking to get things to work right. The hope is to get an idea of what the best practices for creating posts and pages is when working with this software.

## Tables

Here's some more code working with tables with different functions.

```{r}
as_tibble(mtcars) # to glimpse
```

And now using `DT`.

```{r}
mtcars %>% 
  DT::datatable()
```

No go. :( ^[Unfortunately the `DT:datatable()` function does not work with this theme as of yet.]

How about `htmlTable()`?

```{r}
library(htmlTable)
htmlTable(mtcars)
```
OK, so that works. How about `knitr::kable()`?

```{r}
knitr::kable(mtcars, caption = "This is the `mtcars` dataset.")
```

Looks nice.

## Alert notes and warnings

The theme I'm using `academic` has hooks for alerts. The syntax looks like this:


    {{%/* alert note */%}}
    Here is a tip or note...
    {{%/* /alert */%}}

    {{%/* alert warning */%}}
    Here is a warning note...
    {{%/* /alert */%}}


And here are the results.

{{% alert note %}}
Here's a tip or note...
{{% /alert %}}

{{% alert warning %}}
Here's a warning note
{{% /alert %}}

## Tweets

It is sometimes useful to include Twitter cards in posts. 
Here's a tweet card using the `blogdown::shortcode()` command:

```{r tweet-card}
blogdown::shortcode('tweet', '842100683650273281')
```

## Plotting

Let's make a simple plot and see where the image file ends up.

```{r basic-plot}
mtcars %>% 
  ggplot(aes(x = mpg, y = hp)) +
  geom_point() +
  geom_smooth(method = "lm")
```

Plots are generated and then copied to the `/static/posts/<slug-name>/` directory and the plot is named by the code chunk's handle.

## Images

Adding images from other sources in Rmarkdown documents can be acheived through markdown directly with this basic syntax.

```
![](../path/image.png)
```

The path in Hugo for static images makes reference to the `/post/` directory inside of the `/static/` directory. So an image named `app.png` would be `/post/app.png` in the syntax but the image will live in the `/static/post/` directory. 

![](/post/app.png)

The problem with this is that you need to copy the image to the `/static/img/` or `/static/post/` directory. You can choose just make sure to include the correct path in your code. However, this process is a little tedious, I think.

I thought it would be more convenient to use the `knitr::include_graphics()` function to make reference to an image inside the `content/post/` directory and a subdirectory `images/` but that does do the copying of the image, like I thought it might. Instead, the image file is not copied to the `static/post/` directory, so the path is invalid and the image is not displayed.

```{r tortoise}
knitr::include_graphics("images/tortoise001.png")
```

However, using the `EBImage` package from the [`bioconductor` repository](https://www.bioconductor.org/packages/release/bioc/html/EBImage.html), the same behavior as graphics generated by plots applies to the image. In this way the image is copied to the `/static/post/` directory and lives in a subdirectory named by the slug of the post --just like plots. This seems to be a bit more complicated to have to load the `EBImage` library and import the image, but is more convenient in that it organizes images by post and the links are valid.

```{r tortoise-ebimage, message=FALSE}
library(EBImage)
img <- EBImage::readImage(files = "images/tortoise001.png")
display(img)
```

## Citations

You can even add citations through the `citr` package which will facilitate creating citations throug the use of the `Tools > Addin` dropdown menu. Just create a valid path to a `.bib` bibliography file in the YAML section of the `.Rmd` document.

```
---
bibliography: references.bib
---
```

Load the library and then use the dropdown tool to generate the citation syntax for markdown. 

```{r}
library(citr)
```

Here's a citation [@Gries2013a]

## References

